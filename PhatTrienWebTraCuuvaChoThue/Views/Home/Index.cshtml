@model IEnumerable<PhatTrienWebTraCuuvaChoThue.Models.Listing>
@{
    ViewData["Title"] = "Trang chủ";
}

<h2 class="mb-4 text-primary"><i class="bi bi-house-door-fill"></i> Tin đăng mới nhất</h2>

<div class="row row-cols-1 row-cols-md-3 g-4">
    @foreach (var item in Model)
    {
        <div class="col">
            <div class="card h-100 shadow border-0">
                @if (item.ListingImages != null && item.ListingImages.Any())
                {
                    <img src="@item.ListingImages.First().ImageUrl" class="card-img-top" style="height: 200px; object-fit: cover;" alt="Ảnh tin đăng" />
                }
                else
                {
                    <img src="https://via.placeholder.com/400x200?text=No+Image" class="card-img-top" style="height: 200px; object-fit: cover;" alt="No Image" />
                }

                <div class="card-body">
                    <h5 class="card-title text-truncate" title="@item.Title">
                        <i class="bi bi-pin-map-fill text-danger"></i> @item.Title
                    </h5>
                    <p class="card-text small">
                        <i class="bi bi-currency-dollar text-success"></i> <strong>Giá:</strong> @item.Price.ToString("N0") VNĐ<br />
                        <i class="bi bi-aspect-ratio text-info"></i> <strong>Diện tích:</strong> @item.Area m²<br />
                        <i class="bi bi-geo-alt-fill text-warning"></i> <strong>Vị trí:</strong> @item.Location?.Province
                    </p>
                </div>
                <div class="card-footer bg-white border-0 text-center">
                    <a asp-controller="Listings" asp-action="Details" asp-route-id="@item.Id" class="btn btn-outline-primary btn-sm">
                        <i class="bi bi-eye-fill"></i> Xem chi tiết
                    </a>
                </div>
            </div>
        </div>
    }
</div>

@section Scripts {
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css" />
}
